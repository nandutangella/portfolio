<!DOCTYPE html>
<html>
<head>
	<title>Test Function</title>
</head>
<body>
	<h1>Test Cloudflare Pages Function</h1>
	<button onclick="testFunction()">Test /api/chat</button>
	<pre id="result"></pre>

	<script>
		async function testFunction() {
			const resultEl = document.getElementById('result');
			resultEl.textContent = 'Testing...';
			
			try {
				const response = await fetch('/api/chat', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ 
						message: 'test', 
						chat_history: [], 
						preamble: 'test', 
						model: 'command-r-08-2024', 
						temperature: 0.7, 
						max_tokens: 150 
					})
				});
				
				const data = await response.json();
				
				resultEl.textContent = JSON.stringify({
					status: response.status,
					statusText: response.statusText,
					data: data
				}, null, 2);
			} catch (error) {
				resultEl.textContent = 'Error: ' + error.message;
			}
		}
	</script>
</body>
</html>
